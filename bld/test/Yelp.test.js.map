{"version":3,"sources":["webpack:///webpack/bootstrap ca8a2549fbbaebde575a","webpack:///./src/test/Yelp.test.js","webpack:///./src/Yelp.js","webpack:///external \"querystring\"","webpack:///external \"oauth\"","webpack:///external \"dotenv\"","webpack:///external \"chai\""],"names":[],"mappings":"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","file":"Yelp.test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ca8a2549fbbaebde575a\n **/","require('dotenv').config();\n\nvar chai = require('chai');\nvar expect = chai.expect;\n\nimport Yelp from '../Yelp';\nconst opts = {\n  consumer_key: process.env.YELP_CONSUMER_KEY,\n  consumer_secret: process.env.YELP_CONSUMER_SECRET,\n  token: process.env.YELP_TOKEN,\n  token_secret: process.env.YELP_TOKEN_SECRET\n};\nconst yelp = new Yelp(opts);\n\ndescribe('Yelp API access testing...', function () {\n\n  it('yelp search', function (done) {\n    yelp.search({\n        term: 'food',\n        location: 'Montreal'\n      })\n      .then((data) => {\n        expect(data.region).to.be.an('object');\n        done();\n      })\n      .catch((err) => {\n        done(err);\n      });\n  });\n\n  it('yelp business', function (done) {\n    yelp.business('yelp-san-francisco')\n      .then((data) => {\n        expect(data.is_claimed).to.equal(true);\n        expect(data.rating).to.be.a('number');\n        expect(data.mobile_url).to.be.a('string');\n        expect(data.categories).to.be.an('array');\n        expect(data.reviews).to.be.an('array');\n        done();\n      })\n      .catch((err) => {\n        done(err);\n      });\n  });\n\n  it('yelp phone search', function (done) {\n    yelp.phoneSearch({phone: '+15555555555'})\n      .then((data) => {\n        expect(data.total).to.be.a('number');\n        expect(data.businesses).to.be.an('array');\n        done();\n      })\n      .catch((err) => {\n        done(err);\n      });\n  });\n\n  it('yelp - callback', function (done) {\n    yelp.search({\n      term: 'food',\n      location: 'Montreal'\n    }, (err, data) => {\n      if (err) return done(err);\n      expect(data.region).to.be.an('object');\n      expect(data.total).to.be.a('number');\n      expect(data.businesses).to.be.an('array');\n      done();\n    });\n  });\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/test/Yelp.test.js\n **/","import querystring from 'querystring';\nimport oauth from 'oauth';\n\nconst OAuth = oauth.OAuth;\n\nconst baseUrl = 'http://api.yelp.com/v2/';\n\n/**\n * Yelp class provides access to Yelp API\n * @param {object} opts - The object, containing your Yelp credentials\n * @param {string} opts.consumer_key - Consumer Key from Yelp's Manage API access\n * @param {string} opts.consumer_secret - Consumer Secret from Yelp's Manage API access\n * @param {string} opts.token - Token from Yelp's Manage API access\n * @param {string} opts.token_secret - Token Secret from Yelp's Manage API access\n */\nexport default class Yelp {\n  constructor(opts) {\n    this.oauthToken = opts.token;\n    this.oauthTokenSecret = opts.token_secret;\n    this.oauth = new OAuth(\n      null,\n      null,\n      opts.consumer_key,\n      opts.consumer_secret,\n      opts.version || '1.0',\n      null,\n      'HMAC-SHA1'\n    );\n  }\n\n  /**\n   * General Yelp API request\n   * \n   * @param {string} resource - Yelp API resource: search / buisiness/<id> / phone_search\n   * @param {object} params - Yelp API request parameters\n   * @param {function} cb - Callback function (optional)\n   * @returns {*}\n   */\n  get(resource, params = {}, cb) {\n    const promise = new Promise((resolve, reject) => {\n      const debug = params.debug;\n      delete params.debug;\n\n      this.oauth.get(\n        baseUrl + resource + '?' + querystring.stringify(params),\n        this.oauthToken,\n        this.oauthTokenSecret,\n        (err, _data, response) => {\n          if (err) return reject(err);\n          const data = JSON.parse(_data);\n          if (debug) return resolve([data, response]);\n          resolve(data);\n        }\n      );\n    });\n    if (typeof cb === 'function') {\n      promise\n        .then((res) => cb(null, res))\n        .catch(cb);\n      return null;\n    }\n    return promise;\n  }\n\n  /**\n   * Yelp Search API request\n   * https://www.yelp.com/developers/documentation/v2/search_api\n   * @param {object} params\n   * @param {function} callback\n   * @returns {Promise}\n   */\n  search(params, callback) {\n    return this.get('search', params, callback);\n  }\n\n  /**\n   * Yelp Business API request\n   * https://www.yelp.com/developers/documentation/v2/business\n   * @param {string} id - The business id at Yelp\n   * @param {function} callback\n   * @returns {Promise}\n   */\n  business(id, callback) {\n    return this.get(`business/${id}`, undefined, callback);\n  }\n\n  /**\n   * Yelp Phone Search API request\n   * https://www.yelp.com/developers/documentation/v2/phone_search\n   * @param {object} params - The object containing the phone\n   * @param {string} params.phone - The phone string, eg \"+12223334444\"\n   * @param {function} callback\n   * @returns {Promise}\n   */\n  phoneSearch(params, callback) {\n    return this.get('phone_search', params, callback);\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Yelp.js\n **/","module.exports = require(\"querystring\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"querystring\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = require(\"oauth\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"oauth\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"dotenv\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"dotenv\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"chai\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"chai\"\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}